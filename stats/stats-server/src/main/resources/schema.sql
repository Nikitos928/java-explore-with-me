create TABLE IF NOT EXISTS apps
(
    id   SMALLINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    app VARCHAR(250) UNIQUE                       NOT NULL,

    CONSTRAINT pk_app PRIMARY KEY (id)
);

create TABLE IF NOT EXISTS uris
(
    id   BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    path VARCHAR(100) UNIQUE                     NOT NULL,

    CONSTRAINT pk_uri PRIMARY KEY (id)
);

create table if not exists hits
(
    id        INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    app       varchar(250)                             NOT NULL,
    uri       varchar(100)                             NOT NULL,
    ip        varchar(100)                             NOT NULL,
    timestamp TIMESTAMP,
    CONSTRAINT pk_hit PRIMARY KEY (id),
     CONSTRAINT fk_hit_app FOREIGN KEY (app_id) REFERENCES apps (id) ON delete CASCADE,
    CONSTRAINT fk_hit_uri FOREIGN KEY (uri_id) REFERENCES uris (id) ON delete CASCADE
);